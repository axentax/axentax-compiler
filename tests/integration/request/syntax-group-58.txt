set.click.inst: 42
set.style.until: 1/4
set.dual.pan: true
set.dual.panning: [0.5, 0, 1]
set.style.scale: E minor
set.song.key: E

@@ 50 { C D E }


@@ 1/4 160 {

  5| ..|2|2|2|2>>|5|5|5|5:to(continue) ..|2|||5:to(continue) ..|6|6||9:to(continue) ..||9||12~~~
  {
    |||12|12|12:step(231.):v60
    |||10|10|10:step(231.):v60
    |||9|9|10:step(231.):v60
    |||8|9|10:step(231.):v60
  }:1/8

  5| ..|2|2|2|2>>|5|5|5|5:to ..|2|||5:to ..|6|6||9:to ..||9||12~~~
  0|9|9|0|0|10:step(f...4.5...63..6.):stroke(1/4):v65:1/8
  
  5| ..|2|2|2|2>>|5|5|5|5:to(continue) ..|2|||5:to(continue) ..|6|6||9:to(continue) ..||9||12~~~
  {
    |||12|12|12:step(231.):v60
    |||10|10|10:step(231.):v60
    |||9|9|10:step(231.):v60
    |||8|9|10:step(231.):v60
  }:1/8
  
  5| ..|2|2|2|2>>|5|5|5|5:to ..|2|||5:to ..|6|6||9:to ..||9||12~~~
  7|9|9|0|0|7~~~~~~~:stroke(1/3):v65

  ..0| ..|3||:to ..|7|7|:to ..0|2|2|0~~~:stroke(1/8)
  ..0| ..|3||:to ..|7|7|:to ..|3||12~~~
  ..2| ..||3|:to ..|7|7|:to ..|2||12~~~
  ..0| ..|3||:to ..|7|7|:to ..|0||12~~~
  ..2| ..|3||:to ..|7|7|:to ..0|3|3|4~~~:stroke(1/6)
  ..0| ..|3||:to ..|7|7|:to ..|3||12~~~
  ..2| ..||3|:to ..|7|7|:to ..|2||12~~~
  ..0| ..|3||:to ..|7|7|:to ..|0||12~~~~~~~

  {
    // to + step 特定弦のみ
    0|2|0|0|0|0:step(654312):to
    ..7|9|9|7|7|12~:step(2536....):to:v70
  
    0|2|0|0|0|0:step(654312):to
    ..5|7|5|5|5|8~:step(2536....):v65
    
    0|2|0|0|0|0:step(654312):to
    ..7|9|9|7|7|12~:step(2536....):to:v70
    
    12|14|14|12|12|0:step(654312):to
    ..5|7|7|5|5|8~:step(2536....):v88
  
    ||2>>||7|7|7:to(low):step(432)
    ||5>>||9|9|9:to(low):step(432)
    ||6>>||10|10|10:step(432)
    ..|||||12~~~

    12|14|14|12|12|0:step(654312):to
    ..5|7|7|5|5|8~:step(2531....):v88

  }:1/8

  // アルペジオ後の自力スライド
    3|5|4|2:step(6):1/8:v70
  ..3|5|4|2:step(5):1/8:v85
  ..3|5|4|2:step(4):2/8:v100
  ..3|5|4|2:step(3):1/8:v80
  ..|5|4:3/8:v95:stroke(1/16):to ..|12|11|~~~:v65 ..0|12|11|0|0|0:8/4:stroke(1/4):v55

  0|2|2|0:step(5):1/8:v70
  ..0|2|2|0:step(4):1/8:v85
  ..0|2|2|0:step(f):2/8:v100
  ..0|2|2|0:step(6):1/8:v80
  ..0|2|2|0:3/8:v95:to(hi.24)

  ..|:4/4

  2|3|2|2|0|0~~~:stroke(1/4)

  // - チョーキング弦の選択 32= の場合3弦と2弦のみ。指定自体ない場合、鳴弦全て
  // - (1.2:fast|v3:big)のうち
  //      1.2は目指すピッチ、fast.3はチョーキング曲線
  //      v3は、3連でビブラート、bigは揺れ幅で、数値指定も可能
  // - タブルチョーキングのビブラートで、チョーキングしない方の弦も少し揺れたい
  // ||||15|12~~~:bd(2=.(1.2:fast.3|v3:big)..(1.0).(v2).)

  ||||10|7>>||||15|12~~~:to(hi) //:bd(2=.(1.2:fast.3|v3:big).(1.2)(1.0).(v2).)

  ||||2|2~~~:to ||||15|15>>||||7|7~~~
  ||||2|5~~~:to ||||15|18>>||||7|10~~~

  ||2>>||7|7|7^:to(low.24):step(432.)
  0|2|2|1|0|0:step(123456):1/16
  ..|:8/4

  // --- slide to おかしいパターン
  ||||10|>>||||15|12~~~ // 1弦の弾き初めがスライド開始と同時 → ユースケース的にはこれが正しいと思っている
  ||||10|!120>>0|0|0|0|15|12~~~:step(f) // 1弦の弾き初めがスライド開始と同時 コードだとしても可視化すると変
  
  // --- refLandedApproachのコメントアウト解除で治ったケース
  ||||10|10~~~:to ..||||5|5!400>>||||15|15~~~ // 最初の to の効果が 5弦だけになっている
  
  // --- 複雑なケーステスト
  5||||5|5!300>>2||||2|2:step(621):to ..||||5|5!300>>||||3|3~~~ //:step((12).1..2):v(|50|50|50)

  // // --- 良いケース
  |||2|2|2>>||||9|9~~~ // 開始が多いが着地点に合わせている
  5||||5|5!300>>2||||2|2:step(621) ..|5|5|5||>>|2|2|2^:step(543...):v(|50|50|50) // step仕様
  |||0|2|2:to ..|||0|5|5 // 4弦は鳴らしっぱなしにするべきか? 次noteで4弦を指定しなければ良い

  ||||10|>>||||15|12~~~
  ||||10|!120>>0|0|0|0|15|12~~~:step(f)

  ||||7|>>||||5|2~~~

  ||2>>||7|7|7:to(low):step(432)
  ||5>>||9|9|9:to(low):step(432)
  ||7>>||10|10|10:to&:step(432)
  ..|||||15~
  ..0|2|2|0|0|3:step(2536....):to(!continue)
  12|~~~:to(continue)
  2|
  
  // 初期自力スライド
  // { ||||8:v85 ||||9 }:1/64:v50 ||||10~~~:v50 // ■
  // { ||||10:v65:1/256 ||||9:v60 ||||8:v57 ||||7:v54 }:1/64:v45 ||||5~~:v50 // ■

  /* スライド全般確認用 */

  {
    2| 5| 5|>>7|
    8| 10| 12| 14|
    |10:to |24:to |14 ||10|
    ||12| ||14|~~
  }:1/4:v85

  
  { 10|10>>15|~~:to(0/16!fast) 0|0|2|2||~:stroke(1/16) }
  { 2|>>24|:to(1/16!fast) 0|~~~ }
  5|~:to(1/16!fast) 12|~~

  ||||8>>||||10~:1/8 ||||8:1/8:v50 |||11~
  { 2| 5| 5|>>7| 9| 10|:to 12| 17| 19| }:1/8
  { 2| 5| 5|>>7| 8| 10| 12| 14| |10:to |12 |14 ||10| ||12| ||14|~~~~~~~:to(2/8) ||2| }:1/16

  C7~:to(hi.3)
  Dm~:to(hi.3)
  5|>>7|~:to(8/16!fast):v100 Em~~:stroke(1/4):to(hi.3)

  F7:to(hi.3)
  Bm:to(hi.3)
  5|>>7|~:to(8/16!fast):v100 C/E~~:stroke(1/4):to(hi)


  // スライド指定パターン
  // --- mix
  2|2|2|2^:step(6543....):to
  7|7|7|7^:step(34(56.)):to
  2|2|2|2^:step((65)43.....)
  
  // --- mix
  r 7|7|7|7|7|>>2|2|2|2|2|2:step((64.)2r(345..)) // stepにapproach
  { |0|0>>|24|24~~~:to(slow) 0|2|2|0|0:to(hi.24):stroke(1/4):v(70|80|80|70|60|50):step(f.1.3...) }
  { 5|!120>>15|~:to(fast!1/8) 0|2|2|0|0~~~:to(hi.24) }
  { 7|!120>>20|~~:to(fast!1/8) 5|4|4|0|0~~~:to(low) }
  { 2|!120>>24|~~:to(fast!1/8) 7|9|9|7~~~~~~~:to(3/4!low.12!slow) }

  // // --- slide
  // // start until
  // 2|~:to(5/6) 12|~
  // 2|~:to(4/6) 12|~
  // 2|~:to(3/6) 12|~
  // 2|~:to(2/6) 12|~
  // 2|~:to(1/6) 12|~

  // // continue
  // 2|~:to(5/6) 12|~
  // 2|~:to(5/6!continue) 12|~

  // // fast, slow, auto
  // 2|~~:to 12|~
  // 2|~~:to(auto) 12|~ 
  
  // 2|~~:to(fast) 12|~
  // 2|~~:to(fast!auto) 12|~ 
  
  // 2|~~:to(slow) 12|~
  // 2|~~:to(slow!auto) 12|~

  // // --- approach
  // { r } 2|>>7|~ 2|!150>>7|~ 2|!120>>7|~ 2|!130>>7|~ 
  // { r } 12|>>7|~ 12|!150>>7|~ 12|!50>>7|~ 12|!50>>7|~ 

  // // --- release
  // { r } |7~:to(low.24) |2 |7~:to(low.16) |2 |7~:to(low.12) |5 |7~:to(low.6) |2 |7~:to(low) |2
  // { r } |7~:to(hi.24) |5 |7~:to(hi.16) |5 |7~:to(hi.12) |5 |7~:to(hi.6) |5 |7~:to(hi)|5 

  // --- mix
  r 0|2:to(!continue) ..|7~
  r |5>>0|2:to(!continue) ..|7~
  r |7>>0|2:to(!continue) ..|7~:to(hi.24)

  {
    // アルペジオチェック
  
    // to + step 特定弦のみ ■現状エラーは解消済み
    { 0|2|0|0|0|0~~~:to ..2|5|5|2|2|2:step(2536....) }
    // to + step 特定弦のみ
    0|2|2|0|0|0~~~:to:stroke(1/4) ..5|7|7|5|5|5:step((61)345..):v(60|80|70|60|50|40)

    // to + step 全弦
    { 5|8|7|7|5|5~~~:to ..2|5|4|4|2|2:step(f536....) }
    
    // step + stroke
    { 5|8|7|7|5|5~~~ ..2|5|4|4|2|2:step(f536....):stroke(1/4) }
  
  }:v100//:v(80|90|90|80|70|60|50)
}


@@ 1/4 160 {
  ||3|3|3|~:to(hi.24) 5|5|3|5|3|5:step(DudUduDudUdu):1/16
  ||3|3|3|~:to(hi.12) 7|7|7|7|7|7:step(DUduDUdu):1/16
  ||3|3|3|:to(1/2!hi.12) 12|12|12||:step(DUduDUdu):1/16
  3|3|3|3|3|3:step(D.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.uduD.Du.udu):1/16
  C:1/8:step(f.......1.23.4.5)//:stroke(1/4)
}

@@ 1/4 160 {
  ||3|3|3|:to(hi.12) ||3||3|:step(D.Du.udu):1/16
  ||3|3|3|:to(hi.7) ||3||3|:step(DUduDUdu):1/16
  ||3|3|3|:to(low) ||3||3|:step(DUduDUdu):1/16
  ||3|3|3|:to(hi.4) ||3|3||:step(D.Du.udu):1/16
  ||3|3|3|:to(hi.8) |0|3||3|:step(D.Du.udu):1/16
  ||3|3|3|:to(hi.12) 0|0|3||3|:step(D.Du.udu):1/16
  ||3|3|3|~~~:to(1/2!hi.12)
} >> 1/4 {
  |15|||15:to(hi.12) |3||3|:step(D.Du.udu):1/16
  |15|||15:to(hi.7) |3||3|:step(DUduDUdu):1/16
  |15|||15:to(low) |3||3|:step(DUduDUdu):1/16
  |15|||15:to(hi.4) |3|3||:step(D.Du.udu):1/16
  |15|||15:to(hi.8) 0|3||3|:step(D.Du.udu):1/16
  |15|||15:to(hi.12) |0|0|3||3:step(D.Du.udu):1/16
  ||7|7|7|~~~:to(1/2!hi.12)
}

@@ {
  Dm7:to& ||21|22|21|~~ Dm7:to& ||22|22|22|
  Dm7:to& ||23|22|21|~~ Dm7:to& ||22|22|22|~~~~~~:bd(../6 vib 0.5)
}