# スタイル（奏法）解説

## 概要

conductorのスタイル機能は、ギター演奏における様々な奏法や表現技法を指定するための機能です。コードやタブ譜で「何を演奏するか」を指定し、スタイルで「どのように演奏するか」を指定します。

## スタイルの基本構文

```
ノート:スタイル名(パラメータ)
```

### 例
```
C:leg                    // レガート付きコード
|||||12:bd(0..1/4 cho 1) // ベンド付きタブ
|||||7:to(continue)      // スライド付きタブ
```

## 奏法スタイル

### レガート (leg)

音を滑らかに繋ぐ奏法です。

```typescript
"C:leg"           // コード全体にレガート適用
"|||||12:leg"     // 特定の音にレガート適用
```

**効果**: 音と音の間を滑らかに繋ぎ、自然な演奏表現を実現します。

### ミュート (m, M)

音を止める奏法です。

```typescript
"C:m"             // ミュート（音を止める）
"C:M"             // ミュート継続（次の音までミュートを継続）
"|||||12:m"       // 特定の音をミュート
```

**効果**: 
- `m`: 指定した音をミュート
- `M`: 指定した音から次の音までミュートを継続

### ノーマル (n)

通常の演奏スタイルです。

```typescript
"C:n"             // ノーマル演奏
"|||||12:n"       // 特定の音をノーマル演奏
```

**効果**: 特別な奏法を適用せず、通常の演奏を行います。

### ノーマル継続無効 (N)

ステップ奏法で継続を無効にするスタイルです。

```typescript
"|||||5:step(54321):N"  // ステップ奏法で継続を無効
```

**効果**: ステップ奏法の各音で継続フラグを無効にします。

### レスト・ノイズ (r, R)

休符やノイズ音を指定します。

```typescript
"r"               // 休符
"R"               // ノイズ音（弦を弾く音）
```

**効果**: 
- `r`: 完全な休符
- `R`: 弦を弾く音（ノイズ）を生成

### ブラッシング奏法 (d, D, u, U)

弦をブラッシングする奏法です。

```typescript
"C:d"             // ダウンストロークブラッシング（弱）
"C:D"             // ダウンストロークブラッシング（強）
"C:u"             // アップストロークブラッシング（弱）
"C:U"             // アップストロークブラッシング（強）
```

**効果**: 
- `d`: ダウンストロークブラッシング（弱い音量）
- `D`: ダウンストロークブラッシング（強い音量）
- `u`: アップストロークブラッシング（弱い音量）
- `U`: アップストロークブラッシング（強い音量）

## ベンド・ビブラート (bd)

弦を曲げる奏法やビブラートを指定します。

### チョーキング (cho)

弦を上に引っ張って音程を上げる奏法です。

```typescript
"|||||12:bd(0..1/4 cho 1)"     // 1音分チョーキング
"|||||12:bd(0..2/4 cho 0.5)"   // 半音チョーキング
"|||||12:bd(1..3/4 cho 1)"     // 1/4から3/4までチョーキング
```

**パラメータ**:
- `0..1/4`: 適用範囲（開始位置..終了位置/拍子）
- `cho 1`: チョーキング（1 = 1音分、0.5 = 半音分）

### ビブラート (vib)

音程を細かく上下させる奏法です。

```typescript
"|||||12:bd(0..2/4 vib 0.5)"   // 半音ビブラート
"|||||12:bd(0..1/4 vib 1)"     // 1音分ビブラート
"|||||12:bd(0..1/4 vib 0.5 ast)" // アストロイド曲線ビブラート
```

**パラメータ**:
- `0..2/4`: 適用範囲
- `vib 0.5`: ビブラート（0.5 = 半音分、1 = 1音分）
- `ast`: 曲線タイプ（ast = アストロイド、tri = 三角波）

### 複数ベンド指定

複数のベンドを組み合わせることができます。

```typescript
// 連続指定
"|||||12:bd(0..1/4 cho 1):bd(2..4/4 vib 0.5)"

// カンマ区切り
"|||||12:bd(0..1/4 cho 1, 2..4/4 vib 0.5)"

// 複数行
"|||||12:bd(
  0..1/4 cho 1
  2..4/4 vib 0.5
)"

// reset指定
"|||||12:bd(reset, 1..3/4 cho 1)"  // 開始時にリセット
"|||||12:bd(0..3/4 cho 1, reset)"  // 終了時にリセット
```

## スライド (to)

弦を滑らせて音程を変化させる奏法です。

```typescript
"|||||12:to(continue) |||||15"  // 継続スライド（12フレットから15フレットへ）
"|||||7:to(release) |||||10"    // リリーススライド（7フレットから10フレットへ）
```

**パラメータ**:
- `continue`: 継続スライド（音を出しながら滑らせる）
- `release`: リリーススライド（音を止めてから滑らせる）

## アプローチ (approach)

特定の弦・フレットへのアプローチを指定します。

```typescript
"|||||12:approach(|2||4, 80)"   // 2弦と4弦を80%の強度でアプローチ
"|||||12:approach(|||4, 100)"   // 4弦を100%の強度でアプローチ
```

**パラメータ**:
- `|2||4`: アプローチする弦の指定（`|`で区切る）
- `80`: アプローチ強度（0-100%）

## ストローク (stroke)

ピックの動きを指定します。

```typescript
"C:stroke(1/4.up)"     // アップストローク
"C:stroke(1/4)"        // ストローク方向を指定しない
"C:stroke(off)"        // ストロークを無効化
```

**パラメータ**:
- `1/4`: ストロークのタイミング
- `.up`: アップストローク（省略時はダウンストローク）
- `off`: ストロークを無効化

## ストラム (strum)

弦を順番に弾く奏法です。

```typescript
"C:strum(50)"           // 50%の速度でストラム
"C:strum(100)"          // 100%の速度でストラム
"C:strum(25, up)"       // アップ方向で25%の速度
```

**パラメータ**:
- `50`: ストラム速度（0-100%）
- `up`: ストラム方向（up/down）

## ステップ (step)

フィンガリングパターンを指定します。

```typescript
"|||||5:step(54321)"    // 5弦から1弦まで順番に弾く
"|||||5:step(12345)"    // 1弦から5弦まで順番に弾く
"|||||5:step(54321):map(0..3)" // ステップを3回繰り返し
```

**パラメータ**:
- `54321`: 弦の順番（5弦→4弦→3弦→2弦→1弦）

### 高度なステップ記法 🔬

```typescript
"|||||5:step(54321, group)"     // グループ化ステップ
"|||||5:step(54321, ~)"         // チルド付きステップ
"|||||5:step(54321, ^)"         // キャレット付きステップ
"|||||5:step(54321, =)"         // イコール付きステップ
"|||||5:step(rn543)"            // レストノイズステップ
"|||||5:step(R54321)"           // ラウドレストステップ
```

**高度なパラメータ**:
- `group`: グループ化ステップ
- `~`: チルド修飾子
- `^`: キャレット修飾子
- `=`: イコール修飾子
- `rn`: レストノイズ
- `R`: ラウドレスト

## スタッカート (staccato)

音を短く切る奏法です。

```typescript
"C:staccato(1/8)"       // 1/8拍子分スタッカート
"C:staccato(1/4)"       // 1/4拍子分スタッカート
```

**パラメータ**:
- `1/8`: スタッカートの長さ

## ディレイ (delay)

音の遅延を指定します。

```typescript
"C:delay(1/8)"          // 1/8拍子分遅延
"C:delay(1/4)"          // 1/4拍子分遅延
```

**パラメータ**:
- `1/8`: 遅延時間

## テンポ変更 (bpm)

演奏中のテンポを変更します。

```typescript
"C:bpm(160)"            // テンポを160BPMに変更
"C:bpm(120)"            // テンポを120BPMに変更
```

**パラメータ**:
- `160`: 新しいテンポ（BPM）

## 調性指定 (degree)

コードの調性を指定します。

```typescript
"C:degree(C)"           // C調でコードを解釈
"C:%(Am)"               // Am調でコードを解釈（%記法）
```

**パラメータ**:
- `C`: 調性（C、Am、F#mなど）

## マッピング (map)

パターンを繰り返し適用します。

```typescript
"C:map(0..3)"           // 0から3回まで繰り返し
"|||||12:map(1..5)"     // 1から5回まで繰り返し
```

**パラメータ**:
- `0..3`: 繰り返し範囲（開始..終了）

### 高度なマッピング 🔬

```typescript
"|||||12:map(step 2)"           // ステップマッピング
"|||||12:map(3*2)"              // 乗算マッピング
"C:map(0..3, rev)"              // リバースマッピング
"C:map(0..3, ss)"               // ストリングステイ
"C:map(0..3, os)"               // オープンストリング有効
"C:map(0..3, nos)"              // オープンストリング無効
"C:map(0..3, rev, ss)"          // 複合オプション
"|||||12:map(0..3, @offset)"    // オフセット付き
```

**高度なパラメータ**:
- `step 2`: ステップマッピング
- `3*2`: 乗算マッピング
- `rev`: リバース適用
- `ss`: ストリングステイ
- `os/nos`: オープンストリング制御
- `@offset`: オフセット指定

## ポジション指定 (pos)

特定のポジションで演奏するよう指定します。

```typescript
"C:pos(5)"              // 5フレットポジションで演奏
"|||||12:pos(3)"        // 3フレットポジションで演奏
```

**パラメータ**:
- `5`: フレットポジション

### 高度なポジション制御 🔬

```typescript
"C:pos(low)"                    // ローポジション（1-3フレット）
"C:pos(mid)"                    // ミドルポジション（4-9フレット）
"C:pos(high)"                   // ハイポジション（10-15フレット）
"C:pos(inv)"                    // インバージョン
"C:pos(5, exclude:6,1)"         // 6弦と1弦を除外
"C:pos(7, require:2,3)"         // 2弦と3弦を必須
"C:pos(3, coverage:4)"          // 4弦カバレッジ
```

**高度なパラメータ**:
- `low/mid/high`: ポジション範囲指定
- `inv`: インバージョン演奏
- `exclude:6,1`: 指定弦を除外
- `require:2,3`: 指定弦を必須
- `coverage:4`: カバレッジ指定

## スケール指定 (scale)

スケールに基づいて演奏を調整します。

```typescript
"C:scale(major)"        // メジャースケールで調整
"C:scale(minor)"        // マイナースケールで調整
"C:scale(pentatonic)"   // ペンタトニックスケールで調整
```

**パラメータ**:
- `major`: スケール名（major、minor、dorian、diminish、halfDiminish、pentatonic、harmonicMinor、melodicMinor、chromatic）

### 高度なスケール指定 🔬

```typescript
"C:scale(1010110)"          // バイナリスケール定義
"C:scale(major.penta)"      // メジャーペンタトニック
"C:scale(dorian, mode:2)"   // ドリアンモード、2度開始
```

**高度なパラメータ**:
- `1010110`: バイナリでスケール定義（1=使用、0=不使用）
- `major.penta`: 複合スケール指定
- `mode:2`: モード開始位置

## ターン (turn)

ターン奏法を指定します。

```typescript
"C:turn"                // 基本的なターン
"C:turn(up)"            // アップターン
```

**パラメータ**:
- `up`: ターンの方向（省略時はデフォルト）

## 継続時間指定 (until)

音の継続時間を指定します。

```typescript
"C:1/2"                 // 1/2拍子分継続
"C:3/4"                 // 3/4拍子分継続
```

**パラメータ**:
- `1/2`: 継続時間（拍子単位）

## 音量制御 (velocity)

音の強さを指定します。

```typescript
"C:v(100)"              // 音量100%
"C:v(80)"               // 音量80%
"|||||12:v(120)"        // 特定の音の音量120%
```

**パラメータ**:
- `100`: 音量（0-127）

## 弦別音量制御 (velocityPerBows)

弦ごとに音量を指定します。

```typescript
"C:v(100, 80, 90, 70, 85, 95)"  // 6弦から1弦まで個別音量
```

**パラメータ**:
- `100, 80, 90, 70, 85, 95`: 6弦から1弦までの音量

## スタイルの組み合わせ

複数のスタイルを組み合わせることができます。

```typescript
// 複数スタイルの組み合わせ
"C:leg:stroke(1/4.up)"

// ベンドとレガート
"|||||12:bd(0..1/4 cho 1):leg"

// スライドとビブラート
"|||||12:to(continue) |||||15:bd(0..2/4 vib 0.5)"
```

## スタイルの適用範囲

### 時間指定

```typescript
"|||||12:bd(0..1/4 cho 1)"  // 0から1/4拍子まで
"|||||12:bd(1..3/4 vib 0.5)" // 1/4から3/4拍子まで
"|||||12:bd(0..1/8 cho 1)"  // 0から1/8拍子まで
```

### 相対指定

```typescript
"|||||12:bd(..1/4 cho 1)"   // 開始から1/4拍子まで
"|||||12:bd(1.. vib 0.5)"   // 1/4拍子から終了まで
"|||||12:bd(.. vib 0.5)"    // 開始から終了まで
```

## 注意事項

1. **スタイルの順序**: 複数スタイルを指定する場合、適用順序に注意してください
2. **パラメータの範囲**: 各スタイルのパラメータは適切な範囲内で指定してください
3. **MIDI生成**: スタイル情報はMIDIデータに反映され、実際の演奏表現を再現します
4. **パフォーマンス**: 複雑なスタイル指定は処理時間が長くなる場合があります

## 使用例

### 基本的なコード進行

```typescript
"@@ 140 1/4 {
  C:leg
  Dm:stroke(1/4)
  Em:bd(0..1/4 vib 0.5)
  F:strum(80)
}"
```

### 複雑なソロフレーズ

```typescript
"@@ 140 1/4 {
  |||||12:bd(0..1/4 cho 1):leg
  |||||15:to(continue) |||||17
  |||||14:bd(0..2/4 vib 0.5)
  |||||16:approach(|2||4, 90)
}"
```

### ブラッシング奏法の例

```typescript
"@@ 140 1/4 {
  C:d                    // ダウンブラッシング（弱）
  Dm:D                   // ダウンブラッシング（強）
  Em:u                   // アップブラッシング（弱）
  F:U                    // アップブラッシング（強）
}"
```

### テンポ変更の例

```typescript
"@@ 140 1/4 {
  C
  Dm:bpm(160)            // テンポを160BPMに変更
  Em
  F:bpm(120)             // テンポを120BPMに戻す
}"
```

これらのスタイルを組み合わせることで、豊かな表現力を持つギター演奏を再現できます。